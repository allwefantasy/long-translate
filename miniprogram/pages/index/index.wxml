<!--index.wxml-->
<navigation-bar title="文件翻译" back="{{false}}" color="#FFF" background="#4CAF50"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="card file-and-language">
      <view class="file-section">
        <text class="section-title">选择文件</text>
        <button class="select-button" bindtap="chooseFile">
          <text class="icon">📁</text>
          <text>{{fileName || '选择文件'}}</text>
        </button>
      </view>
      <view class="language-section">
        <text class="section-title">目标语言</text>
        <picker bindchange="onLanguageChange" value="{{languageIndex}}" range="{{languages}}" range-key="name">
          <view class="select-button">
            <text class="icon">🌐</text>
            <text>{{languages[languageIndex].name}}</text>
          </view>
        </picker>
      </view>
    </view>
    
<view class="card translation-result" wx:if="{{translationResult}}">
  <text class="card-title">翻译结果</text>
  <view class="result-text">{{translationResult}}</view>
  <view class="button-group">
    <button class="download-button" bindtap="downloadTranslation">
      <text class="icon">⬇️</text> 下载结果
    </button>
    <button class="continue-button" bindtap="continueTranslation" wx:if="{{isDownloading}}">
      <text class="icon">🔄</text> 继续
    </button>
  </view>
</view>
  </view>
</scroll-view>

<view class="fab" bindtap="translateFile" wx:if="{{fileName}}">
  <text class="icon">🔄开始翻译</text>
</view>

<canvas canvas-id="translationCanvas" style="width: 300px; height: 450px; position: fixed; left: -1000px; top: -1000px;"></canvas>
