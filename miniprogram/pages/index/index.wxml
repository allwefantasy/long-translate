<!--index.wxml-->
<navigation-bar title="æ–‡ä»¶ç¿»è¯‘" back="{{false}}" color="#FFF" background="#4CAF50"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="card file-and-language">
      <view class="file-section">
        <text class="section-title">é€‰æ‹©æ–‡ä»¶</text>
        <button class="select-button" bindtap="chooseFile">
          <text class="icon">ğŸ“</text>
          <text>{{fileName || 'é€‰æ‹©æ–‡ä»¶'}}</text>
        </button>
      </view>
      <view class="language-section">
        <text class="section-title">ç›®æ ‡è¯­è¨€</text>
        <picker bindchange="onLanguageChange" value="{{languageIndex}}" range="{{languages}}" range-key="name">
          <view class="select-button">
            <text class="icon">ğŸŒ</text>
            <text>{{languages[languageIndex].name}}</text>
          </view>
        </picker>
      </view>
      <button class="translate-button" bindtap="translateFile" wx:if="{{fileName}}">
        <text class="icon">ğŸ”„</text> å¼€å§‹ç¿»è¯‘
      </button>
    </view>
    
    <view class="card translation-result" wx:if="{{translationResult}}">
      <text class="card-title">ç¿»è¯‘ç»“æœ</text>
      <view class="result-text">{{translationResult}}</view>
      <button class="download-button" bindtap="downloadTranslation">
        <text class="icon">â¬‡ï¸</text> ä¸‹è½½ç»“æœ
      </button>
    </view>
  </view>
</scroll-view>

<view class="fab" bindtap="translateFile" wx:if="{{fileName}}">
  <text class="icon">ğŸ”„å¼€å§‹ç¿»è¯‘</text>
</view>

<canvas canvas-id="translationCanvas" style="width: 300px; height: 450px; position: fixed; left: -1000px; top: -1000px;"></canvas>
